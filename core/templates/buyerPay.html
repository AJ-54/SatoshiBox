{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class='container py-5'>

    <div class='row py-5 d-flex justify-content-center'>
            <span>
                <a href="bitcoin:{{address}}?amount={{expected_value}}">
                    <img height="240px" width="240px"
                        src="https://www.bitcoinqrcodemaker.com/api/?style=bitcoin&address={{address}}&amount={{expected_value}}&color=1">
                </a>
            </span>

            <span class="col-xl-5 col-md-8 col-12">
                <div id="bnomics-order-wrapper">
                    <p class="payment_message" id="amount_text">To pay, send exactly this {{crypto}} amount</p>
                    <h3 class="payment_message cursor-pointer text-truncate" onclick="specificCopy('{{expected_value}}', 'amount_text')" >{{expected_value}} {{crypto}} â‰ˆ {{usd_price}} USD</h3>
                    <p class="payment_message" id="address_text" >to this {{crypto}} address</p>
                    <h3 class="payment_message cursor-pointer text-truncate" onclick="specificCopy('{{address}}', 'address_text')" >{{address}}</h3>
                    <progress class='w-100' value="0" max="600" id="progressBar"></progress>
                    <p class="timer" id="time"></p>    
                </div>

                <div style="display:none" id="bnomics-order-expired-wrapper" >
                    <h3 class="warning bnomics-status-warning">Payment Expired</h3><br>
                    <p class="click-to-try-again cursor-pointer"><a onClick="window.location.reload()">Click here to try again</a></p>
                </div>

            </span>
    </div>
</div>

{% csrf_token %}

{% endblock %}
{% block js %}

<script type="text/javascript" id="data_script">
    var address = "{{address}}";
    var url = "{% url 'core:payment_processed_buyer' %}";
    var payment_id = "{{payment_id}}";
</script>
<script type="text/javascript">
    var accept_payments = true;
    var last_order = "{{last_order}}"
</script>
<script type="text/javascript" src="{% static 'js/timer.js' %}"></script>
<script type="text/javascript" src="{% static 'js/loaddata.js' %}"></script>
<script>
    window.onload = function () {
        loadData();
        var tenMinutes = 60 * 10,
            display = document.querySelector('#time');
        startTimer(tenMinutes, display);
    }
</script>
<script type="text/javascript" src="{% static 'js/paymentSocket.js' %}"></script>
<script type="text/javascript" src="{% static 'js/copy.js' %}"></script>
{% endblock %}